!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.DonutChart=i():t.DonutChart=i()}("undefined"!=typeof self?self:this,function(){return function(t){function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,e){"use strict";t.exports=e(1)},function(t,i,e){"use strict";function o(t,i){if(this.option={title:{show:!0,text:{value:"",color:"#999",fontSize:"30px",fontFamily:"Arial"},secondText:{value:"",color:"#666",fontSize:"30px",fontFamily:"Arial"},x:"50%",y:"50%"},tooltip:{show:!0,fontSize:"24px",fontFamily:"Arial",color:"white"},x:"50%",y:"50%",radius:"30%",lineWidth:"5%",startAngle:0,data:[],label:{show:!0,firstTextStyle:{fontSize:"30px",fontFamily:"Arial",color:"#999"},secondTextStyle:{fontSize:"30px",fontFamily:"Arial",color:"#666"}},capType:"round",selectedStyle:{color:"white",borderWidth:10},color:["#FF7F00","#FFFF00 ","#00FF00 ","#00FFFF ","#0000FF","#8B00FF","#FF0000 "],labelCoverTitle:!0},this.option=n.extend(!0,this.option,i),this.option.color.length<this.option.data.length)throw"option.color 颜色少于 option.data";this.canvas=document.getElementById(t),this.width=this.canvas.width,this.height=this.canvas.height,this.ctx=this.canvas.getContext("2d"),this.circleX=n.formatPercent(i.x,"option.x")*this.width,this.circleY=n.formatPercent(i.y,"option.x")*this.height,this.lineWidth=n.formatPercent(i.lineWidth,"option.lineWidth")*(this.width>this.height?this.height:this.width),this.label=i.label,this.radius=n.formatPercent(i.radius,"option.radius")*(this.width>this.height?this.height:this.width),this.data=i.data,this.color=i.color}var n=e(2);t.exports=o,o.prototype.drawArc=function(t,i,e,o){this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,n.angelToRadian(t),n.angelToRadian(i),!1),o&&(this.ctx.lineWidth=o),this.ctx.strokeStyle=e,this.ctx.stroke(),this.ctx.closePath()},o.prototype.drawTitle=function(t){if(!this.option.title.show)return!1;if(this.option.title&&!t){if(!this.option.title.text.value)return!1;if(this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.option.title.text.color,this.ctx.font=this.option.title.text.fontSize+" "+this.option.title.text.fontFamily,!this.option.title.secondText.value)return this.ctx.fillText(this.option.title.text.value,n.formatPercent(this.option.title.x,"option.title.x")*this.width,n.formatPercent(this.option.title.y,"option.title.y")*this.height),!1;this.ctx.fillText(this.option.title.text.value,n.formatPercent(this.option.title.x,"option.title.x")*this.width,n.formatPercent(this.option.title.y,"option.title.y")*this.height-2*n.formatPx(this.option.title.text.fontSize,"option.title.text.fontSize")/3),this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.option.title.secondText.color,this.ctx.font=this.option.title.secondText.fontSize+" "+this.option.title.secondText.fontFamily,this.ctx.fillText(this.option.title.secondText.value,n.formatPercent(this.option.title.x,"option.title.x")*this.width,n.formatPercent(this.option.title.y,"option.title.y")*this.height+2*n.formatPx(this.option.title.secondText.fontSize,"option.title.secondText.fontSize")/3)}},o.prototype.drawTip=function(t){if(!this.option.tooltip.show)return!1;this.ctx.save(),this.ctx.rotate(n.angelToRadian(90+this.option.startAngle)),this.ctx.beginPath(),this.ctx.font=this.option.tooltip.fontSize+" "+this.option.tooltip.fontFamily,this.ctx.rect(t.x-5,t.y-5,this.ctx.measureText(t.data.name).width+10,2.5*n.formatPx(this.option.tooltip.fontSize)+10),this.ctx.fillStyle="#00000088",this.ctx.fill(),this.ctx.fillStyle=this.option.tooltip.color,this.ctx.textAlign="start",this.ctx.fillText(t.data.name,t.x,t.y+n.formatPx(this.option.tooltip.fontSize)),this.ctx.fillText(t.data.value+"("+t.data.percent+")",t.x,t.y+2.2*n.formatPx(this.option.tooltip.fontSize)),this.ctx.restore()},o.prototype.drawLabel=function(t){if(!this.option.label.show)return!1;this.ctx.save(),this.ctx.rotate(n.angelToRadian(90+this.option.startAngle)),this.ctx.beginPath(),this.ctx.fillStyle=this.label.firstTextStyle.color,this.ctx.font=this.label.firstTextStyle.fontSize+" "+this.label.firstTextStyle.fontFamily,this.ctx.textAlign="center",this.ctx.fillText(t.name,0,-2*n.formatPx(this.label.firstTextStyle.fontSize,"label.firstTextStyle.fontSize")/3),this.ctx.beginPath(),this.ctx.fillStyle=this.label.secondTextStyle.color,this.ctx.font=this.label.secondTextStyle.fontSize+" "+this.label.secondTextStyle.fontFamily,this.ctx.fillText(t.value,0,2*n.formatPx(this.label.secondTextStyle.fontSize,"label.secondTextStyle.fontSize")/3),this.ctx.restore()},o.prototype.init=function(t,i){if(t&&"function"!=typeof t)throw"init() 第一个参数必须是函数";if(i&&"boolean"!=typeof i)throw"labelCoverTitle 必须是boolean";this.canvas.width=this.canvas.width,this.drawTitle(i),this.ctx.translate(this.circleX,this.circleY),this.ctx.rotate(n.angelToRadian(-90+this.option.startAngle)),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap=this.option.capType;var e=this;this.arcArray=[];var o=0;this.data.forEach(function(t,i){o+=t.value});var r=0;this.data.forEach(function(t,i){var n=(t.value/o).toFixed(4).toString().slice(2).split("");n.splice(2,0,".");var l=n.join("");e.arcArray[i]={index:i,name:t.name,value:t.value,startAngle:r,endAngle:t.value/o*360+r,percent:l+"%"},r=e.arcArray[i].endAngle}),this.data.forEach(function(t,i){e.drawArc(e.arcArray[i].startAngle,e.arcArray[i].endAngle,e.color[i])});for(var l=0,s=this.data.length;l<s;l++)if(0!=this.data[l].value){this.drawArc(0,.05,this.color[l]);break}this.canvas.onmousemove=function(i){var o=e.canvas[this.width>this.height?"offsetHeight":"offsetWidth"]/this[this.width>this.height?"height":"width"],n=i.offsetX-this.offsetWidth/2,r=i.offsetY-this.offsetHeight/2,l=n*n,s=r*r;if(Math.sqrt(l+s)>(e.radius-e.lineWidth)*o&&Math.sqrt(l+s)<(e.radius+e.lineWidth)*o){for(var a=Math.atan2(n,-r)/(Math.PI/180)>0?Math.atan2(n,-r)/(Math.PI/180):360+Math.atan2(n,-r)/(Math.PI/180),h=0,c=e.arcArray.length;h<c;h++)if(a<e.arcArray[h].endAngle){e.init(t,e.option.labelCoverTitle),e.drawArc(e.arcArray[h].startAngle,e.arcArray[h].endAngle,e.option.selectedStyle.color,e.option.selectedStyle.borderWidth+e.lineWidth),e.drawArc(e.arcArray[h].startAngle,e.arcArray[h].endAngle,e.color[h],e.lineWidth),e.drawLabel(e.arcArray[h]),e.drawTip({x:n/o,y:r/o,data:e.arcArray[h]}),t(e.arcArray[h]);break}}else e.init(t)}}},function(t,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={},r=n.toString,l=n.hasOwnProperty,s={};t.exports={formatPercent:function(t,i){if("string"==typeof t&&t.indexOf("%")==t.length-1)return t.slice(0,-1)/100;throw i+" 参数格式错误"},formatPx:function(t,i){if("string"==typeof t&&t.indexOf("px")==t.length-2)return+t.slice(0,-2);throw i+" 参数格式错误"},angelToRadian:function(t){return t*Math.PI/180},extend:function(){var t,i,e,n,r,l,s=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"===(void 0===s?"undefined":o(s))||this.isFunction(s)||(s={}),a===h&&(s=this,a--);a<h;a++)if(null!=(r=arguments[a]))for(n in r)t=s[n],e=r[n],s!==e&&(c&&e&&(this.isPlainObject(e)||(i=this.isArray(e)))?(i?(i=!1,l=t&&this.isArray(t)?t:[]):l=t&&this.isPlainObject(t)?t:{},s[n]=this.extend(c,l,e)):void 0!==e&&(s[n]=e));return s},isFunction:function(t){return"function"==typeof t},isPlainObject:function(t){var i;if(!t||"object"!==this.type(t)||t.nodeType||this.isWindow(t))return!1;try{if(t.constructor&&!l.call(t,"constructor")&&!l.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(!s.ownFirst)for(i in t)return l.call(t,i);for(i in t);return void 0===i||l.call(t,i)},type:function(t){return null==t?t+"":"object"===(void 0===t?"undefined":o(t))||"function"==typeof t?n[r.call(t)]||"object":void 0===t?"undefined":o(t)},isWindow:function(t){return null!=t&&t==t.window},isArray:function(t){return"array"===this.type(t)}}}])});
//# sourceMappingURL=donut-chart.min.js.map